!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t){function i(e){var t,i={};for(t in e)"function"==typeof e[t]?i[t]=e[t]:"object"==typeof e[t]?i[t]=AFRAME.utils.clone(e[t]):i[t]=e[t];return i}document.registerElement("a-timeline"),document.registerElement("a-timeline-group"),document.registerElement("a-timeline-animation"),AFRAME.registerComponent("a-timeline-model-animation",{schema:{id:{type:"string"},duration:{type:"number",default:0}}}),AFRAME.registerComponent("animation-timeline",{schema:{direction:{type:"string",default:"normal"},loop:{default:0,parse:function(e){return"true"===e||"false"!==e&&parseInt(e,10)}},pauseEvents:{type:"array"},startEvents:{type:"array"},timeline:{type:"string"}},multiple:!0,init:function(){var e,t=this.data;for(this.animationIsPlaying=!1,this.beginAnimation=this.beginAnimation.bind(this),this.eventDetail={name:this.id},this.time=0,this.timeline=null,this.modelAnimationTimeline=[],e=0;e<t.startEvents.length;e++)this.el.addEventListener(t.startEvents[e],this.beginAnimation);for(e=0;e<t.pauseEvents.length;e++)this.el.addEventListener(t.pauseEvents[e],this.pauseAnimation)},play:function(){this.data.startEvents.length||this.beginAnimation()},tick:function(e,t){var i=this;i.animationIsPlaying&&i.timeline&&(i.time+=t,i.timeline.tick(i.time),i.modelAnimationTimeline.forEach(function(e){if(e){var t=i.el.querySelector(e.id).getAttribute("select");if(e.time<i.time){var n=i.el.sceneEl.querySelector(t);n.removeAttribute("animation-mixer"),n.setAttribute("animation-mixer",{loop:"once",clip:"*"}),e.time=i.timeline.duration+e.time}}}))},beginAnimation:function(){var e,t,i,n,a,o,r,l=this;if(o=document.querySelector(this.data.timeline),"A-TIMELINE"!==o.tagName)throw new Error("[animation-timeline] timeline must be a selector to <a-timeline> element.");for(this.animationIsPlaying=!0,this.time=0,this.timeline=(AFRAME.anime||AFRAME.ANIME).timeline({autoplay:!1,complete:function(){l.animationIsPlaying=!1,l.el.emit("animationtimelinecomplete",l.eventDetail),l.modelAnimationTimeline.forEach(function(e){if(e){var t=l.el.querySelector(e.id).getAttribute("select");l.el.sceneEl.querySelector(t).removeAttribute("animation-mixer")}})},direction:this.data.direction,loop:this.data.loop}),a=0,e=0;e<o.children.length;e++)if("A-TIMELINE-GROUP"!==o.children[e].tagName)"A-TIMELINE-ANIMATION"===o.children[e].tagName&&(a+=this.addAnimationToTimeline(o.children[e],a));else{for(r=o.children[e],n=0,t=0;t<r.children.length;t++)i=this.addAnimationToTimeline(r.children[t],a),i>n&&(n=i);a+=n}},addAnimationToTimeline:function(e,t){var n,a,o,r,l,m,s;if("A-TIMELINE-MODEL-ANIMATION"==e.tagName){s=e.getAttribute("select"),n=parseFloat(e.getAttribute("duration"))||0;var u=t+n,c={id:"#"+e.id,time:u};return this.modelAnimationTimeline.push(c),u}if(a="animation__"+e.getAttribute("name"),s=e.getAttribute("select"),l=this.el.sceneEl.querySelectorAll(s),!l.length)return console.warn('[animation-timeline] No entities found for select="'+s+'"'),0;for(n=parseFloat(e.getAttribute("offset")||0,10),m=0;m<l.length;m++){if(o=l[m].components[a],!o)throw new Error("Could not find animation `"+a+"` for `"+e.getAttribute("select")+"`.");o.updateConfig(),o.stopRelatedAnimations(),r=i(o.config),r.offset=t+n,this.timeline.add(r)}return(r.duration||0)+(r.delay||0)+n},pauseAnimation:function(){this.animationIsPlaying=!1}})}]);